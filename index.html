<!DOCTYPE html>
<html lang="es">

<script>
// ⚡ GH Pages hotfix: matar SW y forzar 1 recarga con ?v=timestamp para bustear caché del HTML
(function(){
  // 1) Si no hay ?v=... en la URL, recarga una sola vez con ese parámetro
  var u = new URL(location.href);
  if(!u.searchParams.has('v')){
    u.searchParams.set('v', Date.now().toString());
    // Recarga una vez con la URL versionada (evita bucles)
    location.replace(u.toString());
  }

  // 2) Mata cualquier Service Worker antiguo (si existiera)
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.getRegistrations().then(function(rs){
      rs.forEach(function(r){ r.unregister(); });
    });
  }
})();
</script>





<!-- FORZAR RUTAS 1.1: GH Pages vs Onion -->
<script>
(function(){
  // Forzar rutas según host, sin autodetección “lista”
  if (location.host.endsWith('github.io')) {
    // GH Pages (project pages)
    window.DH_BASE = '/dejandohuella-landing';
    window.DH_ROOT = '/dejandohuella-landing/live';
  } else {
    // Onion/Nginx
    window.DH_BASE = '';
    window.DH_ROOT = '/live';
  }

  // Helpers mínimos con cache-busting
  window.DH_FETCH_JSON = async function(path){
    const url = window.DH_ROOT + (path[0]==='/'?path:'/'+path) + '?ts=' + Date.now();
    const r = await fetch(url, {cache:'no-store'});
    if(!r.ok) throw new Error('HTTP '+r.status+' @ '+url);
    return r.json();
  };
  window.DH_FETCH_JSONL = async function(path){
    const url = window.DH_ROOT + (path[0]==='/'?path:'/'+path) + '?ts=' + Date.now();
    const r = await fetch(url, {cache:'no-store'});
    if(!r.ok) throw new Error('HTTP '+r.status+' @ '+url);
    const txt = await r.text();
    return txt.split(/\r?\n/).filter(Boolean).map(s=>{try{return JSON.parse(s);}catch(_){return null;}}).filter(Boolean);
  };
  window.DH_IMG_URL = function(path){
    const url = window.DH_ROOT + (path[0]==='/'?path:'/'+path) + '?ts=' + Date.now();
    return url;
  };

  // (opcional) Mata SW en GH Pages para evitar HTML viejo y recarga 1 vez con ?v
  try{
    if (location.host.endsWith('github.io')) {
      if('serviceWorker' in navigator){
        navigator.serviceWorker.getRegistrations().then(rs=>rs.forEach(r=>r.unregister()));
      }
      const u = new URL(location.href);
      if(!u.searchParams.has('v')){ u.searchParams.set('v', Date.now()); location.replace(u.toString()); }
    }
  }catch(e){}
})();
</script>




<head>







  <meta charset="utf-8">
  <title>DejandoHuella Trader — Clearnet (Optimizada)</title>
  <meta name="description" content="Señales BTC/USD, EA MT4 con licencia, mentoría y soporte. Pagos por BTC y USDT (TRC20, BEP20, Arbitrum One, ERC-20).">
  <meta name="color-scheme" content="dark">
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <!-- OG -->
  <meta property="og:title" content="DejandoHuella Trader — BTC/USD">
  <meta property="og:description" content="Señales BTC/USD, EA MT4 con licencia, mentoría y soporte. Clearnet y .onion.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="img/og-image.png">
  <meta property="og:url" content="https://dejandohuellapool.github.io/dejandohuella-landing/">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%230b0f16'/%3E%3Ctext x='50%25' y='56%25' text-anchor='middle' font-size='28' fill='%23e5e7eb' font-family='Arial'%3EDH%3C/text%3E%3C/svg%3E">
  <link rel="preload" as="image" href="live/shots/latest.jpg">

  <style>
    :root{
      --bg:#0b0f16; --fg:#e5e7eb; --muted:#94a3b8; --card:#121826;
      --accent:#22c55e; --accent2:#1ed760; --border:#1f2a3a; --link:#60a5fa;
      --btnText:#06250f; --shadow:rgba(0,0,0,.45);
      --green:#16a34a; --red:#dc2626; --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,Segoe UI,Roboto,Inter}
    a{color:var(--link);text-decoration:none}
    .wrap{max-width:1100px;margin:auto;padding:24px}
    header{display:flex;gap:14px;align-items:center;margin-bottom:8px;flex-wrap:wrap}
    header img{width:64px;height:64px;border-radius:12px;border:1px solid var(--border);object-fit:cover;background:#0f1522}
    h1{font-size:32px;margin:0}
    h2{margin:0 0 10px}
    p,li,small{color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:18px;margin:18px 0}
    .grid{display:grid;gap:14px}
    .grid-2{grid-template-columns:1fr 1fr}
    .row{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .tag{font-size:12px;padding:2px 8px;border:1px solid var(--border);border-radius:12px;color:var(--muted)}
    code{background:#0f1522;border:1px solid var(--border);padding:6px 8px;border-radius:10px;word-break:break-all}
    .copy{cursor:pointer;color:#b4d2ff;border:1px solid var(--border);padding:6px 10px;border-radius:10px;background:#0f1522}
    .copy:hover{filter:brightness(1.1)}
    .cta{
      display:inline-block; min-width:180px; text-align:center;
      background:linear-gradient(180deg,var(--accent2),var(--accent));
      color:var(--btnText); padding:12px 18px; border-radius:12px;
      font-weight:700; border:0; box-shadow:0 6px 0 #0e7a41, 0 8px 18px var(--shadow);
      transform:translateY(0); transition:transform .08s ease, box-shadow .08s ease, filter .2s ease;
      user-select:none; -webkit-tap-highlight-color:transparent
    }
    .cta:active{ transform:translateY(3px); box-shadow:0 3px 0 #0e7a41, 0 6px 12px var(--shadow) }
    .cta--wa{background:linear-gradient(180deg,#2cf475,#25D366)}
    .cta--dark{background:linear-gradient(180deg,#7aa9ff,#3b82f6); color:#081226; box-shadow:0 6px 0 #1f5cc8, 0 8px 18px var(--shadow)}
    .cta-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}

    .menu{position:relative;display:inline-block}
    .menu-panel{
      position:absolute; top:110%; left:0; min-width:280px;
      background:#0f1522; border:1px solid var(--border); border-radius:14px; padding:10px;
      display:none; z-index:30; box-shadow:0 16px 28px var(--shadow)
    }
    .menu-panel a{display:block; margin:8px 0}
    .menu-panel hr{border:0;border-top:1px solid var(--border);opacity:.6;margin:8px 0}

    .payrow{display:grid;gap:8px; margin-bottom:14px}
    .qrbox{border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#0f1522}
    .qrbox summary{list-style:none;cursor:pointer;outline:none;padding:8px 12px;display:inline-flex;align-items:center;gap:10px;font-weight:600;color:var(--fg);user-select:none}
    .qrbox summary::-webkit-details-marker{display:none}
    .qrbox[open] summary{background:#162133}
    .qrwrap{display:flex;justify-content:center;align-items:center;padding:12px;border-top:1px solid var(--border)}
    .qr{width:180px;height:180px;border:1px solid var(--border);border-radius:10px;background:#0b0f16;display:flex;align-items:center;justify-content:center}
    .qr img{width:100%;height:100%;display:block}

    .plan{display:flex;flex-direction:column;gap:10px;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px}
    .plan h3{margin:0;font-size:18px}
    .price{display:inline-block;font-weight:700;border:1px solid var(--border);padding:4px 10px;border-radius:999px;color:var(--fg);background:#0f1522}
    .note{color:var(--muted);margin:0}

    .bar{background:#0f1522;border:1px solid var(--border);border-radius:12px;padding:8px 12px;margin-bottom:12px;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .bar a{color:#b4d2ff}

    /* Live + historial */
    .live-grid{display:grid;gap:12px}
    .kv{display:grid;grid-template-columns:auto 1fr;gap:6px 12px;font-size:16px}
    .kv strong{color:#cbd5e1}
    .badge{padding:2px 10px;border-radius:999px;font-weight:700;font-size:13px;display:inline-block}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid var(--border)}
    th{text-align:left;color:#cbd5e1}

    .status-pill{display:inline-flex;align-items:center;gap:8px;padding:4px 10px;border-radius:999px;border:1px solid var(--border);background:#0f1522}
    .dot{width:10px;height:10px;border-radius:50%}

    /* Responsive */
    @media (max-width:980px){
      .wrap{padding:18px}
      .grid-2{grid-template-columns:1fr}
      header img{width:56px;height:56px}
      h1{font-size:26px}
      .cta{min-width:unset;width:100%}
      .menu-panel{max-width:92vw}
    }
    @media (max-height:520px) and (orientation:landscape){
      .wrap{padding:14px}
      .cta{padding:10px 14px}
      header img{width:52px;height:52px}
      h1{font-size:24px}
    }

    /* Historial en móvil */
    #hist .card-body { overflow-x:auto; -webkit-overflow-scrolling:touch; }
    #hist table { width:100%; border-collapse:collapse; table-layout:fixed; }
    #hist thead th { position:sticky; top:0; background:#0f172a; z-index:1; }
    #hist th, #hist td { padding:8px 10px; }
    @media (max-width:640px){
      #hist h2 { font-size:1rem; }
      #hist th, #hist td { font-size:12px; line-height:1.2; padding:6px 8px; }
    }

    /* Controles mini */
    #refresh-ctrl{
      position:fixed; top:8px; left:8px; z-index:9999;
      display:flex; gap:4px; transform:scale(.7); transform-origin:top left; opacity:.9;
    }
    #refresh-ctrl button, #refresh-ctrl label{
      padding:2px 6px; font-size:10px; line-height:1; border-radius:8px;
    }
  </style>

<script>
// === AUTODETECCIÓN GH PAGES / NGINX + HELPERS DE RUTA ===
(function(){
  var looksGH = location.host.endsWith('github.io');
  var base = (window.DH_BASE !== undefined) ? window.DH_BASE :
             (looksGH ? '/dejandohuella-landing' :
              (location.pathname.startsWith('/dejandohuella-landing') ? '/dejandohuella-landing' : ''));
  window.DH_BASE = base;
  window.DH_ROOT = (window.DH_ROOT !== undefined) ? window.DH_ROOT : (base + '/live');
  // Preload dinámico si existe
  var pre = document.querySelector('link#preload-shot');
  if (pre) pre.href = window.DH_ROOT + '/shots/latest.jpg?ts=' + Date.now();
})();

// === CANDIDATAS DE URL + FETCH CON FALLBACK + CACHE-BUSTING ===
function dhCandidates(path){
  var p = path[0] === '/' ? path : '/' + path;
  var abs = window.DH_ROOT + p;      // ej: '/dejandohuella-landing/live/last.json'
  var relAbs = '/live' + p;          // '/live/last.json'
  var rel = 'live' + p;              // 'live/last.json'
  return Array.from(new Set([abs, relAbs, rel]));
}

async function dhFetchText(path, timeoutMs){
  const urls = dhCandidates(path);
  const tmo = timeoutMs || 6000;
  let lastErr;
  for (const u of urls){
    const url = u + (u.includes('?') ? '&' : '?') + 'ts=' + Date.now();
    try{
      const ctrl = new AbortController();
      const tid = setTimeout(()=>ctrl.abort(), tmo);
      const r = await fetch(url, { cache:'no-store', signal: ctrl.signal });
      clearTimeout(tid);
      if(r.ok) return await r.text();
      lastErr = new Error('HTTP ' + r.status + ' @ ' + url);
    }catch(e){ lastErr = e; }
  }
  throw lastErr || new Error('No reachable URL for ' + path);
}

window.DH_FETCH_JSON = async function(path){
  const txt = await dhFetchText(path, 7000);
  const clean = txt.replace(/^\uFEFF/, '').trim();
  return JSON.parse(clean);
};

window.DH_FETCH_JSONL = async function(path){
  const txt = await dhFetchText(path, 7000);
  return txt.split(/\r?\n/).filter(Boolean).map(s=>{ try{return JSON.parse(s);}catch(_){return null;} }).filter(Boolean);
};

window.DH_IMG_URL = function(path){
  const u = dhCandidates(path)[0];
  return u + (u.includes('?') ? '&' : '?') + 'ts=' + Date.now();
};
</script>

</head>
<body>

<noscript>
  <div class="bar" role="status" aria-live="polite">⚠️ Activa JavaScript para ver datos EN VIVO y el historial.</div>
</noscript>

<!-- Controles -->
<div id="refresh-ctrl" aria-label="Controles de recarga">
  <button id="btn-hard-reload" style="background:#22c55e;color:#091015;border:0;font-weight:700;box-shadow:0 2px 0 #14532d">Actualizar</button>
  <label style="display:flex;align-items:center;gap:6px;background:#111826;color:#e5e7eb;border:1px solid #1f2937">
    <input id="chk-auto" type="checkbox" aria-label="Auto recarga cada 5s"> Auto 5s
  </label>
  <button id="btn-pgp-mini" class="copy" aria-label="Ir a PGP">PGP</button>
  <button id="refresh-close" class="copy" aria-label="Ocultar controles">Cerrar</button>
</div>

<div class="bar" id="site-alert">
  <span>⚠️ Verifica los enlaces oficiales. Usa nuestra <a href="verificacion.html" rel="noopener noreferrer">Verificación oficial</a> o la dirección .onion.</span>
  <button class="cta" data-alert-close aria-label="Cerrar aviso">×</button>
</div>

<div class="wrap">
  <header>
    <img src="logo.png" alt="Logo de DejandoHuella" loading="lazy" decoding="async"
          onerror="if(this.dataset.try!=='1'){this.dataset.try='1';this.src='img/logo.png';}else{this.onerror=null;this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 64 64%22%3E%3Crect width=%2264%22 height=%2264%22 rx=%2212%22 fill=%22%230b0f16%22/%3E%3Ctext x=%2250%25%22 y=%2256%25%22 text-anchor=%22middle%22 font-size=%2228%22 fill=%22%23e5e7eb%22 font-family=%22Arial%22%3EDH%3C/text%3E%3C/svg%3E';}">
    <div>
      <h1>DejandoHuella Trader</h1>
      <div class="cta-row">
        <div class="menu">
          <a class="cta" href="#" id="btn-info" aria-haspopup="true" aria-expanded="false">Solicitar información</a>
          <div class="menu-panel" id="panel-info" aria-hidden="true" role="menu">
            <a class="cta cta--wa" href="whatsapp.html" rel="noopener">WhatsApp (ventas)</a>
            <a class="cta" href="verificacion.html" rel="noopener">Verificación oficial</a>
            <a class="cta cta--dark" href="mailto:dejandohuella_pool@proton.me?subject=Solicitud%20de%20informaci%C3%B3n%20-%20DejandoHuella%20Trader">Solicitud por mail</a>
            <hr>
            <a class="cta" href="clases.html" rel="noopener"><b>🎓 Info Trading</b></a>
          </div>
        </div>
      </div>
      <p><small>Última actualización: <span id="lu"></span></small></p>
    </div>
  </header>

  <!-- HISTORIAL (único) -->
  <section id="hist" class="card" style="margin-top:8px" aria-live="polite">
    <div class="row" style="margin-bottom:6px">
      <h2 style="margin:0">Historial reciente</h2>
      <span id="status-pill" class="status-pill" title="Estado de conexión">
        <span class="dot" id="dot" style="background:#f87171"></span>
        <small id="status-text">Desconectado</small>
      </span>
    </div>
    <div id="hist-empty" class="meta">Sin operaciones aún…</div>
    <table id="hist-table" style="display:none">
      <thead>
        <tr>
          <th>Hora</th><th>Par</th><th>Lado</th>
          <th style="text-align:right">Precio</th><th style="text-align:right">Lote</th>
          <th style="text-align:right">SL</th><th style="text-align:right">TP</th>
        </tr>
      </thead>
      <tbody id="hist-body"></tbody>
    </table>
  </section>

  <!-- OPERACIÓN EN VIVO (datos arriba, imagen sola abajo) -->
  <section id="live" class="card" style="margin-top:16px" aria-live="polite">
    <h2>Operación en vivo</h2>

    <!-- Cuadro de datos -->
    <div class="card" style="margin:8px 0 14px 0">
      <div class="kv">
        <strong>Par:</strong>     <span id="lv-symbol">—</span>
        <strong>Lado:</strong>    <span id="lv-side">—</span>
        <strong>Precio:</strong>  <span id="lv-price">—</span>
        <strong>Lote:</strong>    <span id="lv-lots">—</span>
        <strong>SL / TP:</strong> <span id="lv-sltp">—</span>
        <strong>Hora:</strong>    <span id="lv-ts">—</span>
      </div>
    </div>

    <!-- Imagen MT4 (ruta RELATIVA al repo) -->
    <img id="lv-shot" src="live/shots/latest.jpg" alt="Captura MT4 en vivo"
         style="width:100%;max-width:1000px;border-radius:12px;border:1px solid var(--border);display:block;margin:auto"
         loading="lazy" decoding="async">
  </section>

  <!-- Redes -->
  <div class="card" id="redes">
    <h2>Redes oficiales</h2>
    <p>Síguenos para novedades y soporte:</p>
    <div class="cta-row">
      <a class="cta cta--dark" href="https://www.facebook.com/share/1J54upxdPb/" target="_blank" rel="noopener noreferrer">Facebook</a>
      <a class="cta cta--wa" href="whatsapp.html" aria-label="WhatsApp ventas">WhatsApp</a>
    </div>
  </div>

  <!-- Pagos + Planes (todo intacto) -->
  <section id="medios-pago" class="card" style="margin-top:16px">
    <details>
      <summary style="cursor:pointer; font-weight:800; font-size:1.05rem;">💳 Medios de Pagos + Planes Premium –DejandoHuella Trader</summary>
      <div style="margin-top:12px">
        <div class="card">
          <h2>Pagos (verifica la red)</h2>
          <div class="grid grid-2">
            <div>
              <div class="payrow">
                <div class="row"><b>BTC</b><span class="tag">Bitcoin</span></div>
                <div class="row">
                  <code id="btc">bc1qu6c2036ehv2rssqv32mzv5z9tf92px6q8wp0f4</code>
                  <span class="copy" onclick="copyTxt('btc')">Copiar</span>
                </div>
                <details class="qrbox" data-key="btc"><summary>Mostrar QR</summary>
                  <div class="qrwrap"><div id="qr-btc" class="qr" aria-label="QR BTC"></div></div>
                </details>
              </div>
              <div class="payrow">
                <div class="row"><b>USDT</b><span class="tag">TRC20 / Tron</span></div>
                <div class="row">
                  <code id="trc20">TCoqxfkqA4MAmTbqtWnCzwBzQToecwSiHd</code>
                  <span class="copy" onclick="copyTxt('trc20')">Copiar</span>
                </div>
                <details class="qrbox" data-key="trc20"><summary>Mostrar QR</summary>
                  <div class="qrwrap"><div id="qr-trc20" class="qr" aria-label="QR USDT TRC20"></div></div>
                </details>
              </div>
              <div class="payrow">
                <div class="row"><b>USDT</b><span class="tag">BEP20 / BSC</span></div>
                <div class="row">
                  <code id="bep20">0xa721CD06Fce89aAD41e7f8eC6604653712B7c22F</code>
                  <span class="copy" onclick="copyTxt('bep20')">Copiar</span>
                </div>
                <details class="qrbox" data-key="bep20"><summary>Mostrar QR</summary>
                  <div class="qrwrap"><div id="qr-bep20" class="qr" aria-label="QR USDT BEP20"></div></div>
                </details>
              </div>
            </div>
            <div>
              <div class="payrow">
                <div class="row"><b>USDT</b><span class="tag">Arbitrum One</span></div>
                <div class="row">
                  <code id="arb1">0xa721CD06Fce89aAD41e7f8eC6604653712B7c22F</code>
                  <span class="copy" onclick="copyTxt('arb1')">Copiar</span>
                </div>
                <details class="qrbox" data-key="arb1"><summary>Mostrar QR</summary>
                  <div class="qrwrap"><div id="qr-arb1" class="qr" aria-label="QR USDT Arbitrum One"></div></div>
                </details>
              </div>
              <div class="payrow">
                <div class="row"><b>USDT</b><span class="tag">ERC-20 / Ethereum</span></div>
                <div class="row">
                  <code id="erc20">0xa721CD06Fce89aAD41e7f8eC6604653712B7c22F</code>
                  <span class="copy" onclick="copyTxt('erc20')">Copiar</span>
                </div>
                <details class="qrbox" data-key="erc20"><summary>Mostrar QR</summary>
                  <div class="qrwrap"><div id="qr-erc20" class="qr" aria-label="QR USDT ERC-20"></div></div>
                </details>
              </div>
            </div>
          </div>

          <hr style="border-color:var(--border);opacity:.5;margin:18px 0">

          <div class="payrow">
            <div class="row">
              <b>Transferencia bancaria (USD)</b>
              <span class="tag">Banco Pichincha</span>
            </div>
            <div>
              <p style="margin:6px 0 10px">
                <b>Titular:</b> Empresa DejandoHuella<br>
                <b>Banco:</b> Pichincha<br>
                <b>Tipo de cuenta:</b> Ahorros / Corriente<br>
                <b>Número de cuenta:</b> <code id="cta-pich">2207922413</code>
                <span class="copy" onclick="copyTxt('cta-pich')">Copiar</span><br>
                <b>Referencia:</b> “DejandoHuella + tu nombre”
              </p>

              <details class="qrbox">
                <summary>Mostrar QR Banco Pichincha</summary>
                <div class="qrwrap" style="flex-direction:column;gap:10px">
                  <img id="qr-pich" alt="QR Banco Pichincha" width="220" height="220"
                      style="border:1px solid var(--border);border-radius:10px;background:#fff"
                      src="img/qr-pichincha.png" loading="lazy" decoding="async">
                  <a id="qr-pich-dl" class="cta" href="img/qr-pichincha.png" download="qr-pichincha.png">Descargar PNG</a>
                </div>
              </details>
            </div>
          </div>

          <div class="payrow">
            <div class="row"><b>PayPal</b><span class="tag">Pagos con tarjeta</span></div>
            <div class="row" style="gap:10px;align-items:center">
              <a class="cta" href="https://paypal.me/TU_ALIAS" target="_blank" rel="noopener noreferrer">Pagar con PayPal</a>
              <small>o enviar a: <b>dejandohuella_pool@proton.me</b></small>
            </div>
            <details class="qrbox">
              <summary>¿Cómo pagar por PayPal?</summary>
              <div class="qrwrap" style="flex-direction:column;gap:8px">
                <ol style="margin:0;padding-left:18px;color:var(--muted)">
                  <li>Abre el enlace PayPal o envía al correo indicado.</li>
                  <li>Incluye en el mensaje tu nombre y plan elegido.</li>
                  <li>Recibirás confirmación y acceso al grupo/EA.</li>
                </ol>
              </div>
            </details>
          </div>

          <small>Si envías por red equivocada, los fondos se pierden. Verifica dos veces.</small>
        </div>

        <div class="card" id="planes">
          <h2>Planes Premium – DejandoHuella Trader</h2>
          <div class="grid grid-2">
            <div class="plan">
              <h3>■ Señales Premium <span class="price">USD 500 / mes</span></h3>
              <p class="note">Grupo privado con señales del par <b>BTC/USD</b>. 1–3 señales/día con entrada, SL y TP.</p>
              <div class="cta-row">
                <a class="cta cta--wa"
                  href="https://wa.me/593983566273?text=Hola%2C%20quiero%20el%20plan%20Se%C3%B1ales%20Premium"
                  target="_blank" rel="noopener noreferrer">Chatear por WhatsApp</a>
              </div>
            </div>
            <div class="plan">
              <h3>■ Licencia EA Personal <span class="price">USD 3,000 / anual</span></h3>
              <p class="note">EA <b>DejandoHuella_BTCUSD</b> para una cuenta MT4. 12 meses con soporte y updates.</p>
              <div class="cta-row">
                <a class="cta cta--wa"
                  href="https://wa.me/593983566273?text=Hola%2C%20quiero%20informaci%C3%B3n%20de%20licencia%20EA%20personal"
                  target="_blank" rel="noopener noreferrer">Chatear por WhatsApp</a>
              </div>
            </div>
            <div class="plan">
              <h3>■ EA Full + Mentoría <span class="price">USD 7,500 / pago único</span></h3>
              <p class="note">EA sin restricciones + <b>3 meses de mentoría</b>, instalación y optimización.</p>
              <div class="cta-row">
                <a class="cta cta--wa"
                  href="https://wa.me/593983566273?text=Hola%2C%20me%20interesa%20EA%20Full%20%2B%20Mentor%C3%ADa"
                  target="_blank" rel="noopener noreferrer">Chatear por WhatsApp</a>
              </div>
            </div>
            <div class="plan">
              <h3>■ Socio / Inversionista <span class="price">Desde USD 10,000</span></h3>
              <p class="note">Participación en utilidades y derecho de marca en tu región.</p>
              <div class="cta-row">
                <a class="cta cta--wa"
                  href="https://wa.me/593983566273?text=Hola%2C%20quiero%20informaci%C3%B3n%20sobre%20Socio%20%2F%20Inversionista"
                  target="_blank" rel="noopener noreferrer">Chatear por WhatsApp</a>
              </div>
            </div>
          </div>
          <div style="margin-top:10px"><a class="cta" href="#contacto">Solicitar información</a></div>
        </div>

        <div class="card" id="contacto">
          <h2>Contacto</h2>
          <p><a class="cta" href="mailto:dejandohuella_pool@proton.me">Escríbenos a ProtonMail</a></p>
          <p>.onion: <b>xsfd6o4hs4lffweef6jnfkfvyhmnldi5ng7zjccev2kouh5grsvvh4yd.onion</b></p>

          <p><small>PGP para mensajes cifrados (compara la huella / fingerprint):</small></p>
          <details>
            <summary style="cursor:pointer">PGP Public Key — <strong>Fingerprint:</strong>
              <code>6C26 A663 02E2 095D CABA E3A4 1372 F256 5381 6452</code>
            </summary>
<pre style="white-space:pre-wrap;border:1px solid var(--border);border-radius:10px;padding:10px;background:#0f1522;margin-top:10px">-----BEGIN PGP PUBLIC KEY BLOCK-----
xjMEaLfYihYJKwYBBAHaRw8BAQdAtxVgF8zGlETJFchumSOySa0fYyoWVL+k
gAdoJzAIj7bNO0RlamFuZG9IdWVsbGFfUG9vbEBwcm90b24ubWUgPERlamFu
ZG9IdWVsbGFfUG9vbEBwcm90b24ubWU+wsARBBMWCgCDBYJot9iKAwsJBwkQ
E3LyVlOBZFJFFAAAAAAAHAAgc2FsdEBub3RhdGlvbnMub3BlbnBncGpzLm9y
Z7QGl5DnUkpLn44szFx+0bL7PtTKJ1OdjzCG3kKkrNbSAxUKCAQWAAIBAhkB
ApsDAh4BFiEEbCamYwLiCV3KuuOkE3LyVlOBZFIAAGgwAQDxsnXKWpa6tDlA
Q92ZfUqYf7Hu/jnJZXN00jpvsPnsJAEA00tUpVhkO62cYwIoR9LvOp8olQcs
buCJOy/dk3rLzQvOOARot9iKEgorBgEEAZdVAQUBAQdAuuS/mnJR2JOjHm6N
X8x/V4HLOgaLZqqtpwGZB7JpMBIDAQgHwr4EGBYKAHAFgmi32IoJEBNy8lZT
gWRSRRQAAAAAABwAIHNhbHRAbm90YXRpb25zLm9wZW5wZ3Bqcy5vcme8JW46
H2+MmFpdvrzyGXVqogCmc3ZqbY+s41cIvotS3QKbDBYhBGwmpmMC4gldyrrj
pBNy8lZTgWRSAACwxgEAyq7WSbledwSIS15YtgmQmuAzDvd3+dqsjKI+s47Q
XPIBAPFGstueFY5MPK2dHDQJpNdpsTfnQ4r0VM8hZk3TD/kM
=EcvG
-----END PGP PUBLIC KEY BLOCK-----</pre>
          </details>
        </div>

        <div class="card">
          <h2>Transparencia de señales</h2>
          <p>✅ <b>BTCUSD BUY (BREAK_L2)</b><br>L1..L4 • EMA50/200 • ADX/+DI/−DI • RSI • ATR • Zona</p>
        </div>

        <footer class="card" style="margin-top:16px">
          <p>
            Clearnet: <a href="./">Abrir sitio</a> |
            .onion: <code>xsfd6o4hs4lffweef6jnfkfvyhmnldi5ng7zjccev2kouh5grsvvh4yd.onion</code>
          </p>
          <p>Contacto: <a href="mailto:dejandohuella_pool@proton.me">dejandohuella_pool@proton.me</a></p>
        </footer>

        <small style="color:#94a3b8">© 2025 DejandoHuella Trader</small>
      </div>
    </details>
  </section>
</div>

<!-- QRCode (con SRI) -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" integrity="sha512-2Y8A1aR8fWm9rTqvQXoQd7CjD2LdWw6Qy3r1r0q8oC0l1v2m2o2d6q9hX2u3XoCIiXv2iVwV4J7v3gQn1G8z0w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
(function(){
  // ===== Utilidades base =====
  const $ = (id) => document.getElementById(id);
  const root = document.documentElement;
  const LIVE_ROOT = (window.DH_ROOT || 'live'); // RUTA RELATIVA
  const liveEls = {sym:$('lv-symbol'), side:$('lv-side'), price:$('lv-price'), lots:$('lv-lots'), sltp:$('lv-sltp'), ts:$('lv-ts'), img:$('lv-shot')};
  const status = { pill:$('status-pill'), dot:$('dot'), text:$('status-text') };
  let lastUpdate = 0;

  function setStatus(ok){
    const now = Date.now();
    if(ok){ lastUpdate = now; status.dot.style.background = getCss('--green') || '#16a34a'; status.text.textContent = 'En vivo'; }
    else{
      const age = now - lastUpdate;
      if(age > 10000){ status.dot.style.background = '#f87171'; status.text.textContent = 'Desconectado'; }
      else{ status.dot.style.background = getCss('--warn') || '#f59e0b'; status.text.textContent = 'Reintentando…'; }
    }
  }
  function getCss(v){ return getComputedStyle(root).getPropertyValue(v); }
  function badgeHTML(text){
    const s=(text||'').toUpperCase();
    let color='#9aa6bd';
    if(s.includes('BUY'))  color=getCss('--green')||'#16a34a';
    if(s.includes('SELL')) color=getCss('--red')||'#dc2626';
    return `<span class="badge" style="background:${color}22;color:${color}">${s||'—'}</span>`;
  }
  function nice(n,dp){ if(n===undefined||n===null||n==='')return '—'; const x=Number(n); if(Number.isNaN(x))return '—'; return dp===undefined?x.toString():x.toFixed(dp); }
  function localTs(ts){ if(!ts)return '—'; const t=ts.replace(/\\./g,'-').replace(' ','T'); const d=new Date(t); return Number.isNaN(+d)?ts:d.toLocaleString(); }
  function safeParseJson(txt){ if(!txt)return null; try{ txt=txt.replace(/^\\uFEFF/,'').trim(); const a=txt.indexOf('{'),b=txt.lastIndexOf('}'); if(a>=0&&b>=0) txt=txt.slice(a,b+1); return JSON.parse(txt);}catch(_){return null;} }
  function toast(text){
    const msg=document.createElement('div'); msg.textContent=text;
    Object.assign(msg.style,{position:'fixed',bottom:'20px',right:'20px',background:'#22c55e',color:'#06250f',
    padding:'8px 12px',borderRadius:'8px',boxShadow:'0 2px 8px rgba(0,0,0,.4)',zIndex:'9999'});
    document.body.appendChild(msg); setTimeout(()=>msg.remove(),1500);
  }
  function copyTxt(id){
    const el=$(id); if(!el) return;
    const txt=el.textContent.trim();
    if(navigator.clipboard && window.isSecureContext){
      navigator.clipboard.writeText(txt).then(()=>{toast('✔ Copiado'); if(navigator.vibrate) navigator.vibrate(15);});
    }else{
      const ta=document.createElement('textarea'); ta.value=txt; document.body.appendChild(ta);
      ta.select(); try{document.execCommand('copy');toast('✔ Copiado'); if(navigator.vibrate) navigator.vibrate(15);}catch(_){/* noop */}
      ta.remove();
    }
  }
  window.copyTxt = copyTxt; // expone para botones

  // ===== Panel "Solicitar información" mejorado =====
  (function(){
    const btn=$('btn-info');
    const panel=$('panel-info');
    function close(){ panel.style.display='none'; btn.setAttribute('aria-expanded','false'); }
    function toggle(e){ e.preventDefault(); const show= panel.style.display!=='block'; panel.style.display = show?'block':'none'; btn.setAttribute('aria-expanded', show?'true':'false'); }
    btn.addEventListener('click',toggle);
    document.addEventListener('click',(e)=>{ if(panel.style.display==='block' && !panel.contains(e.target) && e.target!==btn) close(); });
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') close(); });
  })();

  // ===== Cerrar alerta =====
  document.querySelector('[data-alert-close]')?.addEventListener('click',()=>document.getElementById('site-alert')?.remove());

  // ===== Fecha =====
  $('lu').textContent = new Date().toISOString().slice(0,10);

  // ===== QR dinámicos =====
  const ADDR={btc:'bc1qu6c2036ehv2rssqv32mzv5z9tf92px6q8wp0f4',trc20:'TCoqxfkqA4MAmTbqtWnCzwBzQToecwSiHd',bep20:'0xa721CD06Fce89aAD41e7f8eC6604653712B7c22F',arb1:'0xa721CD06Fce89aAD41e7f8eC6604653712B7c22F',erc20:'0xa721CD06Fce89aAD41e7f8eC6604653712B7c22F'};
  function ensureQR(boxId,text,key){
    const box=$(boxId);
    if(!box || box.dataset.done) return;
    if(window.QRCode){ new QRCode(box,{text, width:180, height:180, correctLevel:QRCode.CorrectLevel.M}); }
    else{ const img=document.createElement('img'); img.alt='QR '+(key||''); img.loading='lazy'; img.decoding='async'; img.src='img/qr_'+key+'.png'; box.appendChild(img); }
    box.dataset.done='1';
  }
  document.querySelectorAll('.qrbox').forEach(d=>{
    d.addEventListener('toggle', ()=>{ if(!d.open) return; const key=d.dataset.key; const target='qr-'+key; if(key && ADDR[key]) ensureQR(target,ADDR[key],key); });
  });

  // ===== POLLING con abort + backoff + pausa en background =====
  let histTimer=null, lastTimer=null, imgTimer=null;
  let lastAbort=null, histAbort=null;
  let backoff=1500; // ms (se ajusta dinámicamente)

  async function fetchText(url, signal){
    const ctrl = new AbortController();
    const t = setTimeout(()=>ctrl.abort(), 4000); // timeout 4s
    try{
      const r = await fetch(url,{cache:'no-store', signal: signal || ctrl.signal});
      clearTimeout(t);
      if(!r.ok) throw new Error('HTTP '+r.status);
      return await r.text();
    }catch(e){ clearTimeout(t); throw e; }
  }

  function schedule(fn, ms){ return setTimeout(fn, ms); }
  function clearTimers(){ [histTimer,lastTimer,imgTimer].forEach(t=>t&&clearTimeout(t)); }

  async function pollLast(){
    try{
      lastAbort?.abort(); lastAbort = new AbortController();
      const txt = await fetchText(`${LIVE_ROOT}/last.json?ts=${Date.now()}`, lastAbort.signal);
      const d = safeParseJson(txt);
      if(d){
        liveEls.sym.textContent=d.symbol||'—';
        liveEls.side.innerHTML=badgeHTML(d.side);
        liveEls.price.textContent=nice(d.price);
        liveEls.lots.textContent=nice(d.lot??d.lots,2);
        liveEls.sltp.textContent=`${nice(d.sl)} / ${nice(d.tp)}`;
        liveEls.ts.textContent=localTs(d.ts);
        liveEls.img.src=`${LIVE_ROOT}/shots/latest.jpg?ts=${Date.now()}`;
        setStatus(true);
        backoff = 1500; // reset
      } else {
        setStatus(false);
      }
    }catch(_){ setStatus(false); backoff = Math.min(backoff*1.5, 6000); }
    lastTimer = schedule(pollLast, backoff);
  }

  async function pollHist(){
    const tbl=$('hist-table'), body=$('hist-body'), empty=$('hist-empty');
    function render(rows){
      if(!rows.length){ tbl.style.display='none'; empty.style.display='block'; return; }
      empty.style.display='none'; tbl.style.display='table';
      body.innerHTML=rows.map(r=>`
        <tr>
          <td>${localTs(r.ts)}</td>
          <td>${r.symbol||'—'}</td>
          <td>${badgeHTML(r.side)}</td>
          <td style="text-align:right">${nice(r.price)}</td>
          <td style="text-align:right">${nice(r.lot??r.lots,2)}</td>
          <td style="text-align:right">${nice(r.sl)}</td>
          <td style="text-align:right">${nice(r.tp)}</td>
        </tr>`).join('');
    }
    try{
      histAbort?.abort(); histAbort = new AbortController();
      const txt = await fetchText(`${LIVE_ROOT}/trades.jsonl?ts=${Date.now()}`, histAbort.signal);
      const lines=(txt||'').trim().split(/\r?\n/).filter(Boolean);
      const objs=lines.slice(-10).map(l=>{try{return JSON.parse(l);}catch(_){return null;}}).filter(Boolean).reverse();
      render(objs);
      setStatus(true);
    }catch(_){ setStatus(false); }
    histTimer = schedule(pollHist, Math.max(2500, backoff));
  }

  function refreshImage(){
    const img=liveEls.img; if(!img) return;
    const baseDir=`${LIVE_ROOT}/shots/`;
    const candidates=[baseDir+'latest.jpg', baseDir+'latest.png'];
    (function tryOne(i){
      if(i>=candidates.length) return;
      const u=candidates[i]+'?ts='+Date.now();
      const test=new Image();
      test.onload=()=>{ img.src=u; };
      test.onerror=()=>tryOne(i+1);
      test.src=u;
    })(0);
  }

  // Pausar y reanudar en background
  function startLoops(){ pollLast(); pollHist(); imgTimer=setInterval(refreshImage, 2500); }
  function stopLoops(){ clearTimers(); lastAbort?.abort(); histAbort?.abort(); }
  document.addEventListener('visibilitychange', ()=>{ if(document.hidden){ stopLoops(); } else { startLoops(); } });

  // Controles
  (function(){
    const btn=$('btn-hard-reload');
    const chk=$('chk-auto');
    const closeBtn=$('refresh-close');
    const pgpMini=$('btn-pgp-mini');
    let auto=null;
    function startAuto(){ stopAuto(); auto=setInterval(()=>location.reload(),5000); }
    function stopAuto(){ if(auto){ clearInterval(auto); auto=null; } }

    btn?.addEventListener('click', ()=>{
      const url=new URL(window.location.href);
      url.searchParams.set('v',Date.now());
      window.location.replace(url.toString());
    });
    if(chk){
      try{ const saved=localStorage.getItem('dh_auto_reload_5s'); if(saved==='1'){ chk.checked=true; startAuto(); } }catch(_){/* ignore */}
      chk.addEventListener('change', ()=>{ if(chk.checked){ startAuto(); try{localStorage.setItem('dh_auto_reload_5s','1')}catch(_){}} else { stopAuto(); try{localStorage.removeItem('dh_auto_reload_5s')}catch(_){}} });
    }
    closeBtn?.addEventListener('click',()=>document.getElementById('refresh-ctrl')?.remove());
    pgpMini?.addEventListener('click',()=>{ const det=document.querySelector('#contacto details'); if(det){ det.open=true; det.scrollIntoView({behavior:'smooth',block:'center'});} });
  })();

  // Anti-caché en URL (una vez)
  (function(){
    try{
      const u=new URL(location.href);
      if(!u.searchParams.get('v')){ u.searchParams.set('v',Date.now()); history.replaceState(null,'',u.toString()); }
    }catch(_){/* noop */}
  })();

  // Iniciar
  startLoops();
})();
</script>

<script>
// === BOOSTER: si tu script original no actualiza, este se encarga sin romper nada ===
(function(){
  const $ = (id)=>document.getElementById(id);
  const elSym=$('lv-symbol'), elSide=$('lv-side'), elPrice=$('lv-price'),
        elLots=$('lv-lots'), elSLTP=$('lv-sltp'), elTS=$('lv-ts'),
        elShot=$('lv-shot'), pill=$('status-pill'), dot=$('dot'), stext=$('status-text'),
        histBody=$('hist-body'), histTbl=$('hist-table'), histEmpty=$('hist-empty');

  function nice(n,dp){ if(n===undefined||n===null||n==='')return '—'; const x=Number(n); if(Number.isNaN(x))return '—'; return dp===undefined?x.toString():x.toFixed(dp); }
  function localTs(ts){ if(!ts) return '—'; const t = new Date((ts+'').replace(/\./g,'-').replace(' ','T')); return isNaN(+t)? ts : t.toLocaleString(); }
  function badgeHTML(text){
    const s=(text||'').toUpperCase(); let color='#9aa6bd';
    if(s.includes('BUY'))  color='#16a34a';
    if(s.includes('SELL')) color='#dc2626';
    return '<span class="badge" style="background:'+color+'22;color:'+color+'">'+(s||'—')+'</span>';
  }
  function setStatus(ok){
    if(!pill||!dot||!stext) return;
    if(ok){ dot.style.background='#16a34a'; stext.textContent='En vivo'; }
    else  { dot.style.background='#f87171'; stext.textContent='Desconectado'; }
  }

  async function updateLast(){
    try{
      const last = await window.DH_FETCH_JSON('/last.json');
      if(elSym)   elSym.textContent = last.symbol || '—';
      if(elSide)  elSide.innerHTML  = badgeHTML(last.side);
      if(elPrice) elPrice.textContent = nice(last.price);
      if(elLots)  elLots.textContent  = nice(last.lot ?? last.lots, 2);
      if(elSLTP)  elSLTP.textContent  = nice(last.sl) + ' / ' + nice(last.tp);
      if(elTS)    elTS.textContent    = localTs(last.ts);

      if(elShot){
        const u = window.DH_IMG_URL('/shots/latest.jpg');
        elShot.src = u;
      }
      setStatus(true);
    }catch(e){
      setStatus(false);
    }
  }

  async function updateHist(){
    if(!histBody) return;
    try{
      const rows = await window.DH_FETCH_JSONL('/trades.jsonl');
      const last10 = rows.slice(-10).reverse();
      if(last10.length===0){
        if(histTbl) histTbl.style.display='none';
        if(histEmpty) histEmpty.style.display='block';
        return;
      }
      if(histEmpty) histEmpty.style.display='none';
      if(histTbl) histTbl.style.display='table';
      histBody.innerHTML = last10.map(r=>(
        '<tr>' +
          '<td>'+ localTs(r.ts) +'</td>' +
          '<td>'+ (r.symbol||'—') +'</td>' +
          '<td>'+ badgeHTML(r.side) +'</td>' +
          '<td style="text-align:right">'+ nice(r.price) +'</td>' +
          '<td style="text-align:right">'+ nice(r.lot ?? r.lots, 2) +'</td>' +
          '<td style="text-align:right">'+ nice(r.sl) +'</td>' +
          '<td style="text-align:right">'+ nice(r.tp) +'</td>' +
        '</tr>'
      )).join('');
      setStatus(true);
    }catch(e){
      setStatus(false);
    }
  }

  updateLast(); updateHist();
  setInterval(updateLast, 5000);
  setInterval(updateHist, 7000);
})();
</script>




<script>
// === BOOSTER: si tu script original no actualiza, este se encarga sin romper nada ===
(function(){
  const $ = (id)=>document.getElementById(id);
  const elSym=$('lv-symbol'), elSide=$('lv-side'), elPrice=$('lv-price'),
        elLots=$('lv-lots'), elSLTP=$('lv-sltp'), elTS=$('lv-ts'),
        elShot=$('lv-shot'), pill=$('status-pill'), dot=$('dot'), stext=$('status-text'),
        histBody=$('hist-body'), histTbl=$('hist-table'), histEmpty=$('hist-empty');

  function nice(n,dp){ if(n===undefined||n===null||n==='')return '—'; const x=Number(n); if(Number.isNaN(x))return '—'; return dp===undefined?x.toString():x.toFixed(dp); }
  function localTs(ts){ if(!ts) return '—'; const t = new Date((ts+'').replace(/\./g,'-').replace(' ','T')); return isNaN(+t)? ts : t.toLocaleString(); }
  function badgeHTML(text){
    const s=(text||'').toUpperCase(); let color='#9aa6bd';
    if(s.includes('BUY'))  color='#16a34a';
    if(s.includes('SELL')) color='#dc2626';
    return '<span class="badge" style="background:'+color+'22;color:'+color+'">'+(s||'—')+'</span>';
  }
  function setStatus(ok){
    if(!pill||!dot||!stext) return;
    if(ok){ dot.style.background='#16a34a'; stext.textContent='En vivo'; }
    else  { dot.style.background='#f87171'; stext.textContent='Desconectado'; }
  }

  async function updateLast(){
    try{
      const last = await window.DH_FETCH_JSON('/last.json');
      if(elSym)   elSym.textContent = last.symbol || '—';
      if(elSide)  elSide.innerHTML  = badgeHTML(last.side);
      if(elPrice) elPrice.textContent = nice(last.price);
      if(elLots)  elLots.textContent  = nice(last.lot ?? last.lots, 2);
      if(elSLTP)  elSLTP.textContent  = nice(last.sl) + ' / ' + nice(last.tp);
      if(elTS)    elTS.textContent    = localTs(last.ts);

      if(elShot){
        const u = window.DH_IMG_URL('/shots/latest.jpg');
        elShot.src = u; // siempre con cache-bust
      }
      setStatus(true);
    }catch(e){
      setStatus(false);
    }
  }

  async function updateHist(){
    if(!histBody) return;
    try{
      const rows = await window.DH_FETCH_JSONL('/trades.jsonl');
      const last10 = rows.slice(-10).reverse();
      if(last10.length===0){
        if(histTbl) histTbl.style.display='none';
        if(histEmpty) histEmpty.style.display='block';
        return;
      }
      if(histEmpty) histEmpty.style.display='none';
      if(histTbl) histTbl.style.display='table';
      histBody.innerHTML = last10.map(r=>(`
        <tr>
          <td>${ localTs(r.ts) }</td>
          <td>${ (r.symbol||'—') }</td>
          <td>${ badgeHTML(r.side) }</td>
          <td style="text-align:right">${ nice(r.price) }</td>
          <td style="text-align:right">${ nice(r.lot ?? r.lots, 2) }</td>
          <td style="text-align:right">${ nice(r.sl) }</td>
          <td style="text-align:right">${ nice(r.tp) }</td>
        </tr>
      `)).join('');
      setStatus(true);
    }catch(e){
      setStatus(false);
    }
  }

  updateLast(); updateHist();
  setInterval(updateLast, 5000);
  setInterval(updateHist, 7000);
})();
</script>





</body>
</html>
